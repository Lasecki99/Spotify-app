(this["webpackJsonpspotify-app-react"]=this["webpackJsonpspotify-app-react"]||[]).push([[0],{32:function(n,e,t){n.exports=t.p+"static/media/music.4cbc434b.jpg"},44:function(n,e,t){n.exports=t.p+"static/media/yt.29cbc2bb.webp"},49:function(n,e,t){n.exports=t(64)},54:function(n,e,t){},60:function(n,e,t){},62:function(n,e,t){},64:function(n,e,t){"use strict";t.r(e);var a={};t.r(a),t.d(a,"dustyGray",(function(){return ln})),t.d(a,"alto",(function(){return un})),t.d(a,"codGray",(function(){return sn})),t.d(a,"mineShaft",(function(){return pn}));var r=t(0),c=t.n(r),o=t(19),i=t.n(o),l=(t(54),function(){for(var n,e={},t=/([^&;=]+)=?([^&;]*)/g,a=window.location.hash.substring(1);n=t.exec(a);)e[n[1]]=decodeURIComponent(n[2]);return e}),u=t(28),s=new(t.n(u).a),p=t(8),d=t(6);function m(){var n=Object(p.a)(["\n  width: 100vw;\n  height: 100vh;\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 10000;\n  background-color: black;\n\n  a {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    text-decoration: none;\n    color: white;\n    letter-spacing: 1px;\n    border: 3px solid white;\n    background-color: royalblue;\n    padding: 10px 15px;\n    border-radius: 30px;\n    font-size: 40px;\n    transition: 0.2s;\n\n    &:hover {\n      transform: translate(-50%, -50%) scale(1.2);\n      transform-origin: 50% 50%;\n    }\n  }\n\n  @media (max-width: 1024px) {\n    a {\n      width: 220px;\n      font-size: 20px;\n      padding: 5px 10px;\n      border-width: 2px;\n      text-align: center;\n    }\n  }\n"]);return m=function(){return n},n}var f=d.b.div(m()),g=function(){return c.a.createElement(f,null,c.a.createElement("a",{href:"https://spotify-app-pl.herokuapp.com/login"},"Login with Spotify"))};function h(){var n=Object(p.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 90px;\n  width: 230px;\n  background-color: black;\n  overflow: scroll;\n\n  > ul {\n    display: flex;\n    flex-direction: column;\n    margin: 30px 0 0 30px;\n\n    > a {\n      margin: 4px 0;\n      z-index: 1000000;\n      color: ",";\n\n      &:hover i,\n      &:hover p,\n      &.active i,\n      &.active p {\n        color: ",";\n      }\n\n      > p {\n        z-index: -1;\n        display: inline-block;\n        margin-left: 10px;\n        font-size: 18px;\n        vertical-align: -1px;\n      }\n\n      > i {\n        font-size: 19px;\n        z-index: -1;\n      }\n    }\n  }\n\n  @media (max-width: 1024px) {\n    width: 60px;\n\n    ul {\n      margin: 15px 0 0 15px;\n\n      a {\n        p {\n          display: none;\n        }\n\n        i {\n          font-size: 26px;\n          margin: 10px 0;\n        }\n      }\n    }\n  }\n"]);return h=function(){return n},n}var b=d.b.div(h(),(function(n){return n.theme.dustyGray}),(function(n){return n.theme.alto})),x=t(20),E=t(7),v=t(46);function y(){var n=Object(p.a)(["\n  width: calc(100% - 230px);\n  margin-left: 230px;\n  height: 100%;\n\n  input {\n    width: 100%;\n    background-color: ",";\n    color: #eee;\n    font-weight: 600;\n    font-size: 30px;\n    padding: 15px 40px;\n    outline: none;\n    border: none;\n  }\n\n  div.search-main-content {\n    height: calc(100% - 67px);\n    background-color: ",";\n    overflow: scroll;\n  }\n\n  @media (max-width: 1024px) {\n    margin-left: 60px;\n    width: 100%;\n\n    input {\n      width: calc(100% - 60px);\n      font-size: 18px;\n      padding: 10px 10px;\n    }\n  }\n"]);return y=function(){return n},n}var w=d.b.div(y(),(function(n){return n.theme.mineShaft}),(function(n){return n.theme.codGray}));function O(){var n=Object(p.a)(["\n  display: inline-block;\n\n  h2 {\n    color: ",";\n    margin: 25px 0 25px 20px;\n  }\n\n  div.song {\n    display: inline-block;\n    width: 210px;\n    height: 258px;\n\n    img {\n      display: block;\n      width: 170px;\n      height: 170px;\n      cursor: pointer;\n      margin: 0 auto;\n      border-radius: 5px;\n    }\n\n    p {\n      cursor: pointer;\n      color: ",";\n      text-align: center;\n      margin-top: 10px;\n    }\n  }\n\n  @media (max-width: 1024px) {\n    width: calc(100% - 60px);\n\n    div.song {\n      width: 100%;\n      margin: 0 auto;\n    }\n\n    h2 {\n      text-align: center;\n      margin: 25px auto;\n    }\n  }\n"]);return O=function(){return n},n}var k=d.b.div(O(),(function(n){return n.theme.alto}),(function(n){return n.theme.alto})),j=t(32),_=t.n(j),S=t(5),T=function(n){return{author:n.artists[0].name,name:n.name,audio:new Audio(n.preview_url)}},R=function(n){return{type:"SET_MUSIC_ARR",value:n}},N=function(n){return function(e){if(n){var t=n.type,a=n.id;switch(t){case"album":s.getAlbumTracks(a).then((function(n){var t=n.items.filter((function(n){return null!==n.preview_url}));t=t.map((function(n){return T(n)})),e(R(t))})).catch((function(n){return console.log(n)}));break;case"artist":s.getArtistTopTracks(a,"PL").then((function(n){var t=n.tracks.filter((function(n){return null!==n.preview_url}));t=t.map((function(n){return T(n)})),e(R(t))})).catch((function(n){return console.log(n)}));break;case"playlist":s.getPlaylistTracks(a,{limit:15}).then((function(n){var t=n.items.filter((function(n){return null!==n.track.preview_url}));t=t.map((function(n){return T(n.track)})),e(R(t))})).catch((function(n){return console.log(n)}));break;case"track":s.getTrack(a).then((function(n){var t={};n.preview_url&&(t=[T(n)]),e(R(t))})).catch((function(n){return console.log(n)}))}}}},L=function(n){var e=n.item,t=Object(S.b)();return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"song"},c.a.createElement("img",{onClick:function(){return t(N(e))},src:e.images&&e.images.length?e.images[0].url:_.a,alt:"song"}),c.a.createElement("p",{onClick:function(){return t(N(e))},className:"song-name"},e.name)))},A=t(65),I=function(n){var e=n.item;return(c.a.createElement(c.a.Fragment,null,e.data.items.length?c.a.createElement(k,{className:e.type},c.a.createElement("h2",null,e.type),e.data.items.map((function(n){return c.a.createElement(L,{key:Object(A.a)(),item:n})}))):"New Releases"!==e.type?c.a.createElement("h2",{style:{margin:"25px 0 25px 20px",color:"#ddd"}},"No ",e.type," found"):null))},G=(t(60),function(){return c.a.createElement("div",{className:"lds-ring"},c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null))}),P=function(){var n=Object(S.c)((function(n){return n.searchReducer.searchList})),e=Object(S.c)((function(n){return n.searchReducer.isLoading})),t=Object(S.b)(),a=Object(r.useState)(""),o=Object(v.a)(a,2),i=o[0],l=o[1];return Object(r.useEffect)((function(){i?(t({type:"SET_LOADER"}),t(function(n){return function(e){s.search(n,["album","artist","playlist","track"],{limit:10}).then((function(n){var t=[{type:"Albums",data:n.albums},{type:"Artists",data:n.artists},{type:"Playlists",data:n.playlists},{type:"Tracks",data:n.tracks}];e(function(n){return{type:"GET_SEARCH_LIST",res:n}}(t))})).catch((function(n){return console.log(n)}))}}(i))):n.length&&!i&&t({type:"RESET_LIST"})}),[i]),c.a.createElement(c.a.Fragment,null,c.a.createElement(w,null,c.a.createElement("input",{value:i,onChange:function(n){return l(n.target.value)},placeholder:"Start typing...",type:"text"}),e?c.a.createElement(G,null):c.a.createElement("div",{className:"search-main-content"},n?n.map((function(n){return c.a.createElement(I,{key:n.type,item:n})})):null)))};function C(){var n=Object(p.a)(["\n  width: calc(100% - 230px);\n  margin-left: 230px;\n  height: 100%;\n  overflow: scroll;\n\n  @media (max-width: 1024px) {\n    margin-left: 60px;\n    width: 100%;\n  }\n"]);return C=function(){return n},n}var D=d.b.div(C()),z=function(){var n=Object(S.c)((function(n){return n.newReleases.newReleases})),e=Object(S.b)();Object(r.useEffect)((function(){n.length||e((function(n){s.getNewReleases({limit:10}).then((function(e){return n(function(n){return{type:"GET_NEW_RELEASES",res:n}}(e.albums.items))})).catch((function(n){return console.log(n)}))}))}),[e,n]);var t=[{type:"New Releases",data:{items:n}}];return(c.a.createElement(D,null,t?c.a.createElement("div",{className:"releases-wrapper"},t.map((function(n){return c.a.createElement(I,{key:n.type,item:n})}))):null))};function F(){var n=Object(p.a)(["\n  h2 {\n    color: #eee;\n    padding-top: 8px;\n    padding-bottom: 4px;\n  }\n\n  p {\n    color: #999;\n    padding-top: 5px;\n    padding-bottom: 5px;\n    text-align: left;\n    cursor: pointer;\n  }\n\n  p.selected {\n    color: #222;\n    background-color: #ddd;\n    font-weight: bold;\n  }\n\n  @media (max-width: 1024px) {\n    h2 {\n      display: none;\n    }\n\n    p {\n      display: none;\n    }\n\n    p.selected {\n      display: none;\n    }\n  }\n"]);return F=function(){return n},n}var M=d.b.div(F());function Y(){var n=Object(p.a)(["\n  color: #999;\n  padding-top: 10px;\n\n  > h2 {\n    color: #eee;\n    padding-top: 15px;\n    font-size: 22px;\n  }\n\n  @media (max-width: 1024px) {\n    display: none;\n  }\n"]);return Y=function(){return n},n}var q=d.b.div(Y()),J=function(){var n=Object(S.c)((function(n){return n.playbackReducer.songToPlay}));return(c.a.createElement(c.a.Fragment,null,n?c.a.createElement(c.a.Fragment,null,c.a.createElement(q,null,c.a.createElement("h2",null,"Now playing"),c.a.createElement("p",{className:"song-list-name clickable"},"".concat(n.author," - ").concat(n.name)))):null))},U=function(){var n=Object(S.b)(),e=Object(S.c)((function(n){return n.albumReducer.musicArr})),t=Object(S.c)((function(n){return n.playbackReducer.songToPlay}));return Object(r.useEffect)((function(){e.length&&n({type:"SET_SONG_TO_PLAY",song:e[0]})}),[e]),c.a.createElement(M,null,c.a.createElement(J,null),e.length?c.a.createElement("h2",null,"List of songs"):null,e.length?e.map((function(e){var a=e.author,r=e.name;return(c.a.createElement("p",{key:Object(A.a)(),onClick:function(){return n({type:"SET_SONG_TO_PLAY",song:e})},className:t===e?"selected":""},"".concat(a," - ").concat(r)))})):null)};function H(){var n=Object(p.a)(["\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 90px;\n  width: 100vw;\n  background-color: ",";\n\n  > div.audio-player {\n      background-color: ",";\n      width: 500px;\n      margin: 0 auto;\n      box-shadow: none;\n  }\n\n  @media (max-width: 1024px) {\n      div.audio-player {\n          width: 360px;\n      }\n  }\n\n    /* > div.playback-text {\n        position: absolute;\n        display: inline-block;\n        bottom: 15px;\n        left: 15px;\n        > p {\n            color: ",";\n            text-align: center;\n        }\n    } */\n"]);return H=function(){return n},n}var V=d.b.div(H(),(function(n){return n.theme.mineShaft}),(function(n){return n.theme.mineShaft}),(function(n){return n.theme.alto})),W=t(47);t(61),t(62);function X(){var n=Object(p.a)(["\n  position: absolute;\n  width: 60px;\n  height: 40px;\n  bottom: 20px;\n  left: 40px;\n\n  img {\n    width: 100%;\n    height: 100%;\n  }\n\n  @media (max-width: 1024px) {\n    display: none;\n  }\n"]);return X=function(){return n},n}var B=d.b.a(X()),K=t(44),Q=t.n(K),Z=function(n){var e=n.name,t=n.author;return(c.a.createElement(B,{href:"https://www.youtube.com/results?search_query=".concat(t,"+-+").concat(e),target:"_blank"},c.a.createElement("img",{src:Q.a,alt:"youtube"})))},$=function(){var n=Object(S.c)((function(n){return n.playbackReducer.songToPlay})),e=Object(S.c)((function(n){return n.albumReducer.musicArr})),t=Object(S.b)(),a=Object(r.useRef)();return Object(r.useEffect)((function(){n&&(a.current.audio.src=n.audio.src)}),[n]),c.a.createElement(V,null,n?c.a.createElement(Z,{name:n.name,author:n.author}):null,c.a.createElement(W.a,{className:"audio-player",ref:a,showSkipControls:!0,onClickNext:function(){if(n){var a=e.indexOf(n);(a+=1)===e.length&&(a=0),t({type:"SET_SONG_TO_PLAY",song:e[a]})}},onClickPrevious:function(){if(n){var a=e.indexOf(n);(a-=1)<0&&(a=e.length-1),t({type:"SET_SONG_TO_PLAY",song:e[a]})}}}))},nn=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(x.a,null,c.a.createElement(b,null,c.a.createElement("ul",null,c.a.createElement(x.b,{exact:!0,to:"/"},c.a.createElement("i",{className:"fas fa-search"}),c.a.createElement("p",null,"Search")),c.a.createElement(x.b,{to:"/new-releases"},c.a.createElement("i",{className:"fas fa-compact-disc"}),c.a.createElement("p",null,"New releases")),c.a.createElement(U,null))),c.a.createElement(E.a,{path:"/new-releases",component:z}),c.a.createElement(E.a,{path:"/",component:P}),c.a.createElement($,null)))};function en(){var n=Object(p.a)(["\n  position: absolute;\n  display: table;\n  bottom: 65px;\n  right: 28px;\n  color: ",";\n  border: 1px solid ",";\n  background-color: ",";\n  border-radius: 5px;\n  cursor: pointer;\n\n  &.hide {\n    display: none;\n  }\n\n  > li {\n    display: table-cell;\n    width: 100%;\n    height: 100%;\n    padding: 5px 45px;\n    transition: 0.2s;\n\n    &:hover {\n      background-color: gray;\n    }\n  }\n"]);return en=function(){return n},n}function tn(){var n=Object(p.a)(["\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n  display: flex;\n  align-items: center;\n  border: 1px solid ",";\n  border-radius: 20px;\n  padding: 2px 6px;\n  cursor: pointer;\n  background-color: ",";\n  transition: 0.2s;\n\n  &:hover {\n    background-color: gray;\n  }\n\n  > i {\n    color: white;\n    margin-right: 3px;\n\n    &.hide {\n      display: none;\n    }\n  }\n\n  > img {\n    width: 30px;\n    height: 30px;\n    border-radius: 50px;\n    margin-left: 10px;\n  }\n\n  > p {\n    color: ",";\n    font-size: 12px;\n    font-weight: bold;\n  }\n\n  @media (max-width: 1024px) {\n    display: none;\n  }\n"]);return tn=function(){return n},n}var an=d.b.div(tn(),(function(n){return n.theme.alto}),(function(n){return n.theme.codGray}),(function(n){return n.theme.alto})),rn=d.b.ul(en(),(function(n){return n.theme.alto}),(function(n){return n.theme.alto}),(function(n){return n.theme.codGray})),cn=function(){var n=Object(S.b)(),e=Object(S.c)((function(n){return n.getMeReducer.user}));return Object(r.useEffect)((function(){e.username||n((function(n){s.getMe().then((function(e){return n((t=e.display_name,a=e.images.length?e.images[0].url:"https://www.kindpng.com/picc/m/80-800188_random-user-random-icon-png-transparent-png.png",{type:"GET_ME",name:t,photo:a}));var t,a})).catch((function(n){return console.log(n)}))}))}),[n,e]),c.a.createElement(c.a.Fragment,null,c.a.createElement(rn,{className:"user-list hide"},c.a.createElement("li",{onClick:function(){localStorage.removeItem("accessToken"),window.location.href=window.location.origin+window.location.pathname}},"Logout")),c.a.createElement(an,{onClick:function(){document.body.querySelector("i.fa-angle-up").classList.toggle("hide"),document.body.querySelector("i.fa-angle-down").classList.toggle("hide"),document.body.querySelector("ul.user-list").classList.toggle("hide")}},e.username?c.a.createElement(c.a.Fragment,null,c.a.createElement("i",{className:"fas fa-angle-down"}),c.a.createElement("i",{className:"fas fa-angle-up hide"}),c.a.createElement("p",null,e.username),c.a.createElement("img",{src:e.photo,alt:"you"})):null))},on=function(){var n=function(){localStorage.removeItem("accessToken"),localStorage.removeItem("expirationDate"),alert("Please login again ;)"),window.location.href=window.location.origin+window.location.pathname},e=Object(S.c)((function(n){return n.appReducer.loggedIn})),t=Object(S.b)();if(localStorage.getItem("accessToken"))s.setAccessToken(JSON.parse(localStorage.getItem("accessToken"))),e||t({type:"SET_LOGGED_IN",bool:!0});else{var a=l();if(Object.keys(a).length){var r=JSON.stringify(a.access_token);localStorage.setItem("accessToken",r),localStorage.setItem("expirationDate",Date.now()+36e5),s.setAccessToken(a.access_token),e||t({type:"SET_LOGGED_IN",bool:!0})}}var o=Number(localStorage.getItem("expirationDate"));if(o&&o<Date.now())n();else if(o){var i=o-Date.now();setTimeout(n,i)}return(c.a.createElement(c.a.Fragment,null,e?c.a.createElement("div",{className:"App"},c.a.createElement(nn,null),c.a.createElement(cn,null)):c.a.createElement(g,null)))},ln="#999",un="#ddd",sn="#121212",pn="#282828",dn=t(17),mn=t(45),fn=t(3),gn={newReleases:[]},hn=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gn,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"GET_NEW_RELEASES":return Object(fn.a)(Object(fn.a)({},n),{},{newReleases:n.newReleases.concat(e.res)});default:return n}},bn={loggedIn:!1},xn=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bn,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_LOGGED_IN":return Object(fn.a)(Object(fn.a)({},n),{},{loggedIn:e.bool});default:return n}},En={searchList:[],isLoading:!1},vn=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:En,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"GET_SEARCH_LIST":return Object(fn.a)(Object(fn.a)({},n),{},{searchList:e.res,isLoading:!1});case"RESET_LIST":return Object(fn.a)(Object(fn.a)({},n),{},{searchList:[]});case"SET_LOADER":return Object(fn.a)(Object(fn.a)({},n),{},{isLoading:!0});default:return n}},yn={clickedSong:null,musicArr:[]},wn=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yn,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_CLICKED_SONG":return Object(fn.a)(Object(fn.a)({},n),{},{clickedSong:e.clicked});case"SET_MUSIC_ARR":return Object(fn.a)(Object(fn.a)({},n),{},{musicArr:e.value});default:return n}},On={songToPlay:null},kn=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:On,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_SONG_TO_PLAY":return Object(fn.a)(Object(fn.a)({},n),{},{songToPlay:e.song});default:return n}},jn={playlist:[]},_n=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jn,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_TO_PLAYLIST":return Object(fn.a)(Object(fn.a)({},n),{},{playlist:n.playlist.concat(e.song)});case"REMOVE_FROM_PLAYLIST":return Object(fn.a)(Object(fn.a)({},n),{},{playlist:n.playlist.filter((function(n){return n.id!==e.id}))});default:return n}},Sn={user:{username:null,photo:null}},Tn=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sn,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"GET_ME":return Object(fn.a)(Object(fn.a)({},n),{},{user:{username:e.name,photo:e.photo}});default:return n}},Rn=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||dn.d,Nn=Object(dn.c)({newReleases:hn,appReducer:xn,searchReducer:vn,albumReducer:wn,playbackReducer:kn,playlistReducer:_n,getMeReducer:Tn}),Ln=Object(dn.e)(Nn,Rn(Object(dn.a)(mn.a)));i.a.render(c.a.createElement(S.a,{store:Ln},c.a.createElement(d.a,{theme:a},c.a.createElement(on,null))),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.4e1910fc.chunk.js.map